<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DCI ARCHIVE | The Complete History</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">

    <style>
        /* --- 1. PLATINUM DESIGN SYSTEM --- */
        :root {
            --bg-body: #08080a;
            --bg-glass: rgba(20, 20, 25, 0.8);
            --bg-card: rgba(255, 255, 255, 0.03);
            --border-subtle: rgba(255, 255, 255, 0.08);
            --border-highlight: rgba(255, 255, 255, 0.2);
            
            --text-main: #F0F0F0;
            --text-muted: #888899;
            
            --accent-gold: #D4AF37;
            
            /* Corps Colors */
            --bd: #005596;
            --bluecoats: #0099CC;
            --crown: #482C58;
            --boston: #BA0C2F;
            --scv: #C41230;
            --cavies: #009639;
            --phantom: #E5E4E2;
            --cadets: #78002E;
            --mandarins: #E96B10;
            --troopers: #1C3F75;
            --colts: #CE1126;
            --stars: #A2AAAD;
            --madison: #004d2c;
            --crossmen: #57585A;
            --bk: #418FDE;
            --spirit: #87CEFA;
            --glassmen: #E6B23A;
            --seattle: #2E8B57;
            --academy: #FFD100;
            --magic: #800080;
            
            --font-heading: 'Cinzel', serif;
            --font-body: 'Lato', sans-serif;
            
            --ease-luxury: cubic-bezier(0.16, 1, 0.3, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-body);
            background-image: radial-gradient(circle at 50% 0%, #1a1a20 0%, var(--bg-body) 60%);
            color: var(--text-main);
            font-family: var(--font-body);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* --- 2. HEADER --- */
        header {
            position: sticky; top: 0; z-index: 100;
            background: var(--bg-glass);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-subtle);
            padding: 20px 0;
        }

        .header-inner {
            max-width: 1100px; margin: 0 auto; padding: 0 30px;
            display: flex; justify-content: space-between; align-items: center;
        }

        .brand-title {
            font-family: var(--font-heading); font-size: 1.5rem; letter-spacing: 2px; color: #fff; font-weight: 700;
            cursor: pointer;
        }

        .view-toggle {
            display: flex; background: rgba(0,0,0,0.3); border-radius: 30px; padding: 4px;
            border: 1px solid var(--border-subtle);
        }
        .toggle-btn {
            padding: 8px 20px; border-radius: 25px; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px;
            color: var(--text-muted); cursor: pointer; transition: all 0.4s var(--ease-luxury); font-weight: 700;
        }
        .toggle-btn.active {
            background: var(--text-main); color: #000;
        }

        /* --- 3. CHAMPION TREE (v4.1 Style) --- */
        #view-tree { display: block; padding: 80px 20px; max-width: 900px; margin: 0 auto; position: relative; }

        .timeline-spine {
            position: absolute; top: 0; bottom: 0; left: 50%; width: 1px;
            background: linear-gradient(180deg, transparent, var(--accent-gold) 20%, var(--accent-gold) 80%, transparent);
            opacity: 0.3; transform: translateX(-50%); z-index: 0;
        }

        .year-node {
            display: flex; justify-content: center; align-items: center;
            margin-bottom: 100px; position: relative; z-index: 1;
            opacity: 0; transform: translateY(40px); transition: 0.8s var(--ease-luxury);
        }
        .year-node.visible { opacity: 1; transform: translateY(0); }

        .year-badge {
            position: absolute; left: 50%; transform: translateX(-50%);
            width: 60px; height: 60px; border-radius: 50%;
            background: #050505; border: 1px solid var(--accent-gold);
            color: var(--accent-gold); font-family: var(--font-heading); font-weight: 700; font-size: 1.1rem;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.15); z-index: 2;
        }

        .p-card {
            width: 40%; background: var(--bg-card);
            border: 1px solid var(--border-subtle); border-radius: 8px;
            overflow: hidden; cursor: pointer; transition: 0.3s; position: relative;
        }
        .p-card:hover { transform: translateY(-5px); border-color: var(--border-highlight); }

        /* Layout */
        .year-node:nth-child(odd) .p-card { margin-right: auto; text-align: right; }
        .year-node:nth-child(even) .p-card { margin-left: auto; text-align: left; }
        
        /* Connectors */
        .year-node:nth-child(odd) .p-card::after {
            content: ''; position: absolute; top: 30px; right: -50px; width: 50px; height: 1px; 
            background: linear-gradient(90deg, var(--border-subtle), transparent);
        }
        .year-node:nth-child(even) .p-card::before {
            content: ''; position: absolute; top: 30px; left: -50px; width: 50px; height: 1px; 
            background: linear-gradient(-90deg, var(--border-subtle), transparent);
        }

        .p-card-accent { height: 3px; width: 100%; background: var(--accent-color); }
        .p-card-body { padding: 25px; }
        
        .p-corps {
            font-family: var(--font-heading); font-size: 1.5rem; line-height: 1.1; color: #fff; margin-bottom: 5px;
        }
        .p-show { font-size: 1rem; color: var(--text-muted); font-style: italic; }
        .p-score {
            margin-top: 15px; font-size: 0.9rem; color: var(--accent-gold); font-weight: 700;
            display: flex; align-items: center; gap: 10px; justify-content: inherit;
        }

        .tie-wrapper { width: 40%; display: flex; flex-direction: column; gap: 15px; }
        .year-node:nth-child(odd) .tie-wrapper { margin-right: auto; align-items: flex-end; }
        .year-node:nth-child(even) .tie-wrapper { margin-left: auto; align-items: flex-start; }
        .tie-wrapper .p-card { width: 100%; }

        /* --- 4. DATABASE VIEW --- */
        #view-db { display: none; padding: 40px 30px; max-width: 1200px; margin: 0 auto; animation: fadeIn 0.5s ease; }
        
        .search-bar {
            background: transparent; border: none; border-bottom: 1px solid var(--border-highlight);
            color: #fff; font-size: 1.5rem; padding: 10px 0; width: 100%; margin-bottom: 40px;
            font-family: var(--font-heading); text-align: center;
        }
        .search-bar:focus { outline: none; border-color: var(--accent-gold); }

        .grid-year { 
            font-family: var(--font-heading); font-size: 2rem; color: #333; 
            border-bottom: 1px solid #222; margin-bottom: 20px; 
        }
        
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-bottom: 60px; }
        
        .db-card {
            background: var(--bg-card); border: 1px solid var(--border-subtle);
            border-radius: 8px; padding: 20px; cursor: pointer; transition: 0.3s;
            position: relative; overflow: hidden;
        }
        .db-card:hover { border-color: var(--accent-color); background: rgba(255,255,255,0.05); }
        
        .db-rank { 
            position: absolute; top: 15px; right: 20px; font-family: var(--font-heading); 
            font-size: 1.2rem; color: #333; 
        }
        .rank-1-gold { color: var(--accent-gold) !important; }

        /* --- 5. MODAL --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); backdrop-filter: blur(10px);
            z-index: 1000; display: none; align-items: center; justify-content: center;
        }
        .modal-content {
            width: 90%; max-width: 600px; background: #0a0a0a; border: 1px solid var(--border-highlight);
            border-radius: 4px; transform: translateY(20px); opacity: 0; transition: 0.4s var(--ease-luxury);
        }
        .modal-overlay.active .modal-content { transform: translateY(0); opacity: 1; }

        .modal-header {
            padding: 40px; text-align: center;
            background: radial-gradient(circle at top, var(--modal-tint), transparent 80%);
        }
        .close-btn {
            position: absolute; top: 20px; right: 20px; color: #666; cursor: pointer; font-size: 1.5rem;
        }
        .btn-action {
            display: inline-block; padding: 12px 30px; border: 1px solid var(--border-highlight);
            color: #fff; text-decoration: none; font-size: 0.8rem; text-transform: uppercase;
            margin-top: 30px; transition: 0.3s;
        }
        .btn-action:hover { background: #fff; color: #000; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Mobile */
        @media (max-width: 768px) {
            .timeline-spine { left: 20px; }
            .year-badge { left: 20px; width: 40px; height: 40px; font-size: 0.9rem; }
            .year-node { flex-direction: column; align-items: flex-end; margin-bottom: 60px; }
            .p-card, .tie-wrapper { width: calc(100% - 50px); margin-left: auto !important; text-align: left !important; }
            .year-node:nth-child(odd) .p-card::after, .year-node:nth-child(even) .p-card::before { display: none; }
            .p-score { justify-content: flex-start; }
        }
    </style>
</head>
<body>

    <header>
        <div class="header-inner">
            <div class="brand-title" onclick="switchView('tree')">DCI ARCHIVE</div>
            <div class="view-toggle">
                <div class="toggle-btn active" id="btn-tree" onclick="switchView('tree')">Champions</div>
                <div class="toggle-btn" id="btn-db" onclick="switchView('db')">Database</div>
            </div>
        </div>
    </header>

    <div id="view-tree">
        <div class="timeline-spine"></div>
        <div id="tree-root"></div>
    </div>

    <div id="view-db">
        <input type="text" class="search-bar" id="dbSearch" placeholder="Search History (e.g. 2003, Cavies)...">
        <div id="db-root"></div>
    </div>

    <div class="modal-overlay" id="modal" onclick="if(event.target==this)closeModal()">
        <div class="modal-content" id="modalContent">
            <div class="close-btn" onclick="closeModal()">×</div>
            <div class="modal-header" id="m-header">
                <div style="font-family:var(--font-heading); color:var(--accent-gold); margin-bottom:10px;">
                    <span id="m-year"></span> • <span id="m-rank"></span>
                </div>
                <h2 id="m-corps" style="font-family:var(--font-heading); font-size:2.5rem; line-height:1; color:#fff;"></h2>
                <div id="m-score" style="font-family:var(--font-heading); font-size:1.5rem; margin-top:10px; color:#aaa;"></div>
            </div>
            <div style="padding:20px 40px 40px; text-align:center;">
                <p id="m-show" style="font-size:1.2rem; font-style:italic; font-family:serif; color:#ddd;"></p>
                <p id="m-desc" style="font-size:0.95rem; color:#888; margin-top:20px;"></p>
                <a href="#" id="m-link" target="_blank" class="btn-action">Watch on YouTube</a>
            </div>
        </div>
    </div>

    <script>
        /* --- COMPLETE DATABASE (2000-2024) --- */
        const db = [
            // 2024
            { y: 2024, r: 1, c: "Bluecoats", s: "Change Is Everything", sc: "98.750", d: "エントロピーと混沌。" },
            { y: 2024, r: 2, c: "Boston Crusaders", s: "Glitch", sc: "97.413", d: "不具合（Glitch）。" },
            { y: 2024, r: 3, c: "Blue Devils", s: "The Romantics", sc: "97.075", d: "ロマン主義。" },
            { y: 2024, r: 4, c: "Carolina Crown", s: "Promethean", sc: "95.025", d: "プロメテウス。" },
            { y: 2024, r: 5, c: "Santa Clara Vanguard", s: "Vagabond", sc: "95.000", d: "放浪者。" },
            { y: 2024, r: 6, c: "Phantom Regiment", s: "Mynd", sc: "93.925", d: "精神。" },
            { y: 2024, r: 7, c: "Mandarins", s: "Vieux Carré", sc: "92.563", d: "フレンチクォーター。" },
            { y: 2024, r: 8, c: "The Cavaliers", s: "Beneath the Armor", sc: "90.950", d: "鎧の下。" },
            { y: 2024, r: 9, c: "Colts", s: "On Fields", sc: "89.775", d: "フィールド。" },
            { y: 2024, r: 10, c: "Troopers", s: "Dance with the Devil", sc: "88.950", d: "悪魔とのダンス。" },
            { y: 2024, r: 11, c: "Blue Stars", s: "Universal", sc: "88.600", d: "宇宙。" },
            { y: 2024, r: 12, c: "Madison Scouts", s: "Mosaic", sc: "87.050", d: "モザイク。" },
            // 2023
            { y: 2023, r: 1, c: "Blue Devils", s: "The Cut-Outs", sc: "99.200", d: "マティスの切り絵。" },
            { y: 2023, r: 2, c: "Bluecoats", s: "The Garden of Love", sc: "97.738", d: "愛の庭。" },
            { y: 2023, r: 3, c: "Carolina Crown", s: "The Round Table", sc: "97.650", d: "アーサー王伝説。" },
            { y: 2023, r: 4, c: "Boston Crusaders", s: "White Whale", sc: "96.925", d: "白鯨。" },
            { y: 2023, r: 5, c: "The Cadets", s: "Atlas Rising", sc: "94.313", d: "アトラス。" },
            { y: 2023, r: 6, c: "Mandarins", s: "Sinnerman", sc: "93.775", d: "罪人。" },
            { y: 2023, r: 7, c: "Phantom Regiment", s: "Exogenesis", sc: "92.988", d: "自然と生命。" },
            { y: 2023, r: 8, c: "The Cavaliers", s: "...Where You'll Find Me", sc: "92.125", d: "追憶。" },
            { y: 2023, r: 9, c: "Colts", s: "Where the Heart Is", sc: "90.263", d: "故郷。" },
            { y: 2023, r: 10, c: "Troopers", s: "To Lasso the Sun", sc: "89.475", d: "太陽。" },
            { y: 2023, r: 11, c: "Blue Stars", s: "In Absintheia", sc: "88.625", d: "アブサン。" },
            { y: 2023, r: 12, c: "Blue Knights", s: "Unharnessed", sc: "87.750", d: "解放。" },
            // 2022
            { y: 2022, r: 1, c: "Blue Devils", s: "Tempus Blue", sc: "98.750", d: "青の起源。" },
            { y: 2022, r: 2, c: "Boston Crusaders", s: "Paradise Lost", sc: "97.325", d: "失楽園。" },
            { y: 2022, r: 2, c: "Bluecoats", s: "Riffs and Revelations", sc: "97.325", d: "リフと啓示。" },
            { y: 2022, r: 4, c: "Carolina Crown", s: "Right Here, Right Now", sc: "96.350", d: "今ここ。" },
            { y: 2022, r: 5, c: "Santa Clara Vanguard", s: "Finding Nirvana", sc: "95.000", d: "ニルヴァーナ。" },
            { y: 2022, r: 6, c: "The Cadets", s: "Rearview Mirror", sc: "92.913", d: "バックミラー。" },
            { y: 2022, r: 7, c: "Blue Stars", s: "Of War and Peace", sc: "92.775", d: "戦争と平和。" },
            { y: 2022, r: 8, c: "Phantom Regiment", s: "No Walk Too Far", sc: "90.675", d: "歩み。" },
            { y: 2022, r: 9, c: "The Cavaliers", s: "Signs of the Times", sc: "90.600", d: "時代の兆候。" },
            { y: 2022, r: 10, c: "Mandarins", s: "The Otherside", sc: "90.013", d: "向こう側。" },
            { y: 2022, r: 11, c: "Colts", s: "The Silk Road", sc: "87.200", d: "シルクロード。" },
            { y: 2022, r: 12, c: "Troopers", s: "VorAcious", sc: "86.425", d: "貪欲。" },
            // 2019
            { y: 2019, r: 1, c: "Blue Devils", s: "Ghostlight", sc: "98.325", d: "ゴーストライト。" },
            { y: 2019, r: 2, c: "Bluecoats", s: "The Bluecoats", sc: "98.238", d: "ビートルズ。" },
            { y: 2019, r: 3, c: "Santa Clara Vanguard", s: "Vox Eversio", sc: "96.600", d: "声の反乱。" },
            { y: 2019, r: 4, c: "Carolina Crown", s: "Beneath the Surface", sc: "96.250", d: "表面の下。" },
            { y: 2019, r: 5, c: "The Cavaliers", s: "The Wrong Side of the Tracks", sc: "95.400", d: "線路の向こう側。" },
            { y: 2019, r: 6, c: "Boston Crusaders", s: "Goliath", sc: "94.488", d: "ゴリアテ。" },
            { y: 2019, r: 7, c: "Blue Knights", s: "...I Remember Everything", sc: "92.050", d: "記憶。" },
            { y: 2019, r: 8, c: "Blue Stars", s: "Call of the Wild", sc: "91.225", d: "野性の呼び声。" },
            { y: 2019, r: 9, c: "The Cadets", s: "Behold", sc: "89.838", d: "女性の力。" },
            { y: 2019, r: 10, c: "Mandarins", s: "subTerra", sc: "89.300", d: "地下都市。" },
            { y: 2019, r: 11, c: "Crossmen", s: "Valkyrie", sc: "87.550", d: "ワルキューレ。" },
            { y: 2019, r: 12, c: "Phantom Regiment", s: "I Am Joan", sc: "87.238", d: "ジャンヌ・ダルク。" },
            // 2018
            { y: 2018, r: 1, c: "Santa Clara Vanguard", s: "Babylon", sc: "98.625", d: "バビロン。" },
            { y: 2018, r: 2, c: "Blue Devils", s: "Dreams and Nighthawks", sc: "97.350", d: "ナイトホークス。" },
            { y: 2018, r: 3, c: "Bluecoats", s: "Session 44", sc: "96.950", d: "セッション44。" },
            { y: 2018, r: 4, c: "Carolina Crown", s: "Beast", sc: "95.500", d: "野獣。" },
            { y: 2018, r: 5, c: "Boston Crusaders", s: "S.O.S.", sc: "94.313", d: "遭難信号。" },
            { y: 2018, r: 6, c: "The Cavaliers", s: "On Madness and Creativity", sc: "93.213", d: "狂気と創造。" },
            { y: 2018, r: 7, c: "The Cadets", s: "The Unity Project", sc: "92.225", d: "統合。" },
            { y: 2018, r: 8, c: "Blue Stars", s: "The Once and Future Carpenter", sc: "90.050", d: "大工。" },
            { y: 2018, r: 9, c: "Blue Knights", s: "The Fall and Rise", sc: "88.925", d: "エジプトの太陽。" },
            { y: 2018, r: 10, c: "Mandarins", s: "Life Rite", sc: "88.150", d: "生贄の儀式。" },
            { y: 2018, r: 11, c: "Phantom Regiment", s: "This New World", sc: "86.950", d: "新世界。" },
            { y: 2018, r: 12, c: "Crossmen", s: "The Final Crossing", sc: "86.750", d: "交差点。" },
            // 2017
            { y: 2017, r: 1, c: "Blue Devils", s: "Metamorph", sc: "98.538", d: "変身。" },
            { y: 2017, r: 2, c: "Santa Clara Vanguard", s: "Ouroboros", sc: "97.600", d: "ウロボロス。" },
            { y: 2017, r: 3, c: "Carolina Crown", s: "It Is...", sc: "96.575", d: "解体。" },
            { y: 2017, r: 4, c: "The Cavaliers", s: "Menagerie", sc: "95.200", d: "動物園。" },
            { y: 2017, r: 5, c: "Bluecoats", s: "Jagged Line", sc: "95.163", d: "ギザギザの線。" },
            { y: 2017, r: 6, c: "Boston Crusaders", s: "Wicked Games", sc: "92.963", d: "魔女狩り。" },
            { y: 2017, r: 7, c: "The Cadets", s: "The Faithful, The Fallen, The Forgiven", sc: "91.263", d: "ミサ。" },
            { y: 2017, r: 8, c: "Blue Knights", s: "i", sc: "90.400", d: "アイ。" },
            { y: 2017, r: 9, c: "Phantom Regiment", s: "Phantasm", sc: "88.125", d: "幻想。" },
            { y: 2017, r: 10, c: "Blue Stars", s: "Star Crossed", sc: "87.938", d: "ロミオとジュリエット。" },
            { y: 2017, r: 11, c: "Crossmen", s: "Enigma", sc: "86.825", d: "謎。" },
            { y: 2017, r: 12, c: "Madison Scouts", s: "The Last Man Standing", sc: "85.250", d: "終末世界。" },
            // 2016
            { y: 2016, r: 1, c: "Bluecoats", s: "Down Side Up", sc: "97.650", d: "上下逆さま。" },
            { y: 2016, r: 2, c: "Blue Devils", s: "As Dreams Are Made On", sc: "97.250", d: "テンペスト。" },
            { y: 2016, r: 3, c: "Carolina Crown", s: "Relentless", sc: "97.088", d: "復讐。" },
            { y: 2016, r: 4, c: "Santa Clara Vanguard", s: "Force of Nature", sc: "95.300", d: "自然の力。" },
            { y: 2016, r: 5, c: "The Cavaliers", s: "Propaganda", sc: "94.025", d: "プロパガンダ。" },
            { y: 2016, r: 6, c: "The Cadets", s: "Awakening", sc: "92.763", d: "目覚め。" },
            { y: 2016, r: 7, c: "Blue Knights", s: "The Great Event", sc: "90.738", d: "大事件。" },
            { y: 2016, r: 8, c: "Phantom Regiment", s: "Voice of Promise", sc: "89.963", d: "約束の声。" },
            { y: 2016, r: 9, c: "Blue Stars", s: "Le Rêve", sc: "89.050", d: "夢。" },
            { y: 2016, r: 10, c: "Crossmen", s: "Continuum", sc: "86.925", d: "連続体。" },
            { y: 2016, r: 11, c: "The Academy", s: "Drum Corpse Bride", sc: "86.488", d: "死体の花嫁。" },
            { y: 2016, r: 12, c: "Boston Crusaders", s: "Quixotic", sc: "84.800", d: "ドン・キホーテ。" },
            // 2015
            { y: 2015, r: 1, c: "Blue Devils", s: "Ink", sc: "97.650", d: "インク。" },
            { y: 2015, r: 2, c: "Carolina Crown", s: "Inferno", sc: "97.075", d: "地獄。" },
            { y: 2015, r: 3, c: "Bluecoats", s: "Kinetic Noise", sc: "96.925", d: "運動ノイズ。" },
            { y: 2015, r: 4, c: "The Cadets", s: "The Power of 10", sc: "95.900", d: "10の力。" },
            { y: 2015, r: 5, c: "Santa Clara Vanguard", s: "The Spark of Invention", sc: "93.850", d: "発明の火花。" },
            { y: 2015, r: 6, c: "Blue Knights", s: "Because...", sc: "91.850", d: "なぜなら。" },
            { y: 2015, r: 7, c: "Phantom Regiment", s: "City of Light", sc: "90.325", d: "パリ。" },
            { y: 2015, r: 8, c: "Madison Scouts", s: "78th & Madison", sc: "88.750", d: "ジーン・ケリー。" },
            { y: 2015, r: 9, c: "The Cavaliers", s: "Game On", sc: "88.325", d: "ゲーム。" },
            { y: 2015, r: 10, c: "Boston Crusaders", s: "Conquest", sc: "86.800", d: "征服。" },
            { y: 2015, r: 11, c: "Blue Stars", s: "Side Show", sc: "85.150", d: "サーカス。" },
            { y: 2015, r: 12, c: "Crossmen", s: "Above & Beyond", sc: "85.025", d: "空へ。" },
            // 2014
            { y: 2014, r: 1, c: "Blue Devils", s: "Felliniesque", sc: "99.650", d: "フェリーニ。" },
            { y: 2014, r: 2, c: "Bluecoats", s: "Tilt", sc: "97.175", d: "傾き。" },
            { y: 2014, r: 3, c: "The Cadets", s: "Promise: An American Portrait", sc: "96.875", d: "アメリカの肖像。" },
            { y: 2014, r: 4, c: "Santa Clara Vanguard", s: "Scheherazade", sc: "96.075", d: "シェヘラザード。" },
            { y: 2014, r: 5, c: "Carolina Crown", s: "Out of This World", sc: "95.650", d: "宇宙。" },
            { y: 2014, r: 6, c: "The Cavaliers", s: "Immortal", sc: "93.675", d: "吸血鬼。" },
            { y: 2014, r: 7, c: "Phantom Regiment", s: "Swan Lake", sc: "91.425", d: "白鳥の湖。" },
            { y: 2014, r: 8, c: "Blue Knights", s: "That One Second", sc: "91.150", d: "その一瞬。" },
            { y: 2014, r: 9, c: "Blue Stars", s: "Where the Heart Is", sc: "89.600", d: "家。" },
            { y: 2014, r: 10, c: "Boston Crusaders", s: "Animal Farm", sc: "88.800", d: "動物農場。" },
            { y: 2014, r: 11, c: "Madison Scouts", s: "Time Trip", sc: "87.575", d: "時間旅行。" },
            { y: 2014, r: 12, c: "Crossmen", s: "Alma Gitana", sc: "86.225", d: "ジプシーの魂。" },
            // 2013
            { y: 2013, r: 1, c: "Carolina Crown", s: "E=mc²", sc: "98.300", d: "相対性理論。" },
            { y: 2013, r: 2, c: "Blue Devils", s: "The Re:Rite of Spring", sc: "98.050", d: "春の祭典。" },
            { y: 2013, r: 3, c: "The Cadets", s: "Side by Side", sc: "96.950", d: "バーバー。" },
            { y: 2013, r: 4, c: "Santa Clara Vanguard", s: "Les Misérables", sc: "96.850", d: "レ・ミゼラブル。" },
            { y: 2013, r: 5, c: "Bluecoats", s: "To Look For America", sc: "93.350", d: "アメリカを探して。" },
            { y: 2013, r: 6, c: "Phantom Regiment", s: "Triumphant Journey", sc: "93.250", d: "勝利の旅。" },
            { y: 2013, r: 7, c: "The Cavaliers", s: "Secret Society", sc: "90.500", d: "秘密結社。" },
            { y: 2013, r: 8, c: "Boston Crusaders", s: "Rise", sc: "90.400", d: "蜂起。" },
            { y: 2013, r: 9, c: "Madison Scouts", s: "Corps of Brothers", sc: "90.100", d: "兄弟の絆。" },
            { y: 2013, r: 10, c: "Blue Knights", s: "NoBeginningNoEnd", sc: "87.750", d: "円。" },
            { y: 2013, r: 11, c: "Spirit of Atlanta", s: "Speakeasy", sc: "86.400", d: "酒場。" },
            { y: 2013, r: 12, c: "Blue Stars", s: "Voodoo", sc: "85.450", d: "ブードゥー。" },
            // 2012
            { y: 2012, r: 1, c: "Blue Devils", s: "Cabaret Voltaire", sc: "98.700", d: "ダダイズム。" },
            { y: 2012, r: 2, c: "Carolina Crown", s: "For the Common Good", sc: "97.650", d: "市民のためのファンファーレ。" },
            { y: 2012, r: 3, c: "Phantom Regiment", s: "Turandot", sc: "96.550", d: "トゥーランドット。" },
            { y: 2012, r: 4, c: "The Cadets", s: "12.25", sc: "95.050", d: "クリスマス。" },
            { y: 2012, r: 5, c: "Santa Clara Vanguard", s: "Music of the Starry Night", sc: "94.450", d: "星月夜。" },
            { y: 2012, r: 6, c: "Bluecoats", s: "UnMasqued", sc: "92.550", d: "仮面。" },
            { y: 2012, r: 7, c: "Boston Crusaders", s: "The Titans", sc: "89.100", d: "巨人。" },
            { y: 2012, r: 8, c: "The Cavaliers", s: "15 Minutes of Fame", sc: "88.850", d: "名声。" },
            { y: 2012, r: 9, c: "Madison Scouts", s: "Reframed", sc: "88.000", d: "展覧会の絵。" },
            { y: 2012, r: 10, c: "Blue Knights", s: "Avian", sc: "86.700", d: "鳥。" },
            { y: 2012, r: 11, c: "Spirit of Atlanta", s: "Sin City", sc: "84.400", d: "ラスベガス。" },
            { y: 2012, r: 12, c: "Crossmen", s: "Fragile", sc: "84.000", d: "地球。" },
            // 2011
            { y: 2011, r: 1, c: "The Cadets", s: "Between Angels and Demons", sc: "98.350", d: "天使と悪魔。" },
            { y: 2011, r: 2, c: "Blue Devils", s: "The Beat of My Heart", sc: "97.800", d: "バカラック。" },
            { y: 2011, r: 3, c: "The Cavaliers", s: "XtraordinarY", sc: "96.850", d: "X。" },
            { y: 2011, r: 4, c: "Carolina Crown", s: "Rach Star", sc: "95.300", d: "ラフマニノフ・ロック。" },
            { y: 2011, r: 5, c: "Phantom Regiment", s: "Juliet", sc: "95.050", d: "ロミオとジュリエット。" },
            { y: 2011, r: 6, c: "Santa Clara Vanguard", s: "The Devil's Staircase", sc: "92.200", d: "悪魔の階段。" },
            { y: 2011, r: 7, c: "Bluecoats", s: "Brave New World", sc: "92.050", d: "素晴らしき新世界。" },
            { y: 2011, r: 8, c: "Boston Crusaders", s: "Revolution", sc: "89.150", d: "レ・ミゼラブル。" },
            { y: 2011, r: 9, c: "Blue Knights", s: "English Folk Song Suite", sc: "89.200", d: "イギリス民謡。" },
            { y: 2011, r: 10, c: "Madison Scouts", s: "New York Morning", sc: "87.550", d: "9.11。" },
            { y: 2011, r: 11, c: "Blue Stars", s: "ReBourne", sc: "86.200", d: "ボーン・アイデンティティー。" },
            { y: 2011, r: 12, c: "Spirit of Atlanta", s: "ATL Confidential", sc: "85.350", d: "フィルム・ノワール。" },
            // 2010
            { y: 2010, r: 1, c: "Blue Devils", s: "Through a Glass, Darkly", sc: "98.900", d: "鏡。" },
            { y: 2010, r: 2, c: "The Cavaliers", s: "Mad World", sc: "97.750", d: "狂気。" },
            { y: 2010, r: 3, c: "Bluecoats", s: "Metropolis", sc: "96.400", d: "都市。" },
            { y: 2010, r: 4, c: "Carolina Crown", s: "A Sec2nd Chance", sc: "95.950", d: "セカンドチャンス。" },
            { y: 2010, r: 5, c: "The Cadets", s: "Toy Souldier", sc: "95.100", d: "おもちゃの兵隊。" },
            { y: 2010, r: 6, c: "Phantom Regiment", s: "Into the Light", sc: "93.850", d: "光へ。" },
            { y: 2010, r: 7, c: "Santa Clara Vanguard", s: "Bartók", sc: "92.000", d: "バルトーク。" },
            { y: 2010, r: 8, c: "Blue Stars", s: "Houdini", sc: "91.900", d: "マジック。" },
            { y: 2010, r: 9, c: "Boston Crusaders", s: "Thy Kingdom Come", sc: "90.450", d: "王国。" },
            { y: 2010, r: 10, c: "Madison Scouts", s: "Slaughter on Tenth Avenue", sc: "90.400", d: "10番街の殺人。" },
            { y: 2010, r: 11, c: "Blue Knights", s: "Europa", sc: "87.100", d: "ヨーロッパ。" },
            { y: 2010, r: 12, c: "Glassmen", s: "The Prayer Cycle", sc: "85.800", d: "祈り。" },
            // 2009
            { y: 2009, r: 1, c: "Blue Devils", s: "1930", sc: "99.050", d: "大恐慌時代。" },
            { y: 2009, r: 2, c: "Carolina Crown", s: "The Grass Is Always Greener", sc: "97.500", d: "隣の芝生。" },
            { y: 2009, r: 3, c: "The Cadets", s: "West Side Story", sc: "97.200", d: "ウェストサイド物語。" },
            { y: 2009, r: 4, c: "The Cavaliers", s: "The Great Divide", sc: "96.150", d: "大分水嶺。" },
            { y: 2009, r: 5, c: "Santa Clara Vanguard", s: "Ballet for Martha", sc: "95.650", d: "アパラチアの春。" },
            { y: 2009, r: 6, c: "Bluecoats", s: "Imagine", sc: "93.150", d: "想像。" },
            { y: 2009, r: 7, c: "Boston Crusaders", s: "The Core of Temptation", sc: "90.700", d: "誘惑。" },
            { y: 2009, r: 8, c: "Blue Stars", s: "The Factory", sc: "90.050", d: "工場。" },
            { y: 2009, r: 9, c: "Phantom Regiment", s: "The Red Violin", sc: "89.900", d: "レッド・バイオリン。" },
            { y: 2009, r: 10, c: "Glassmen", s: "The One", sc: "87.750", d: "一つ。" },
            { y: 2009, r: 11, c: "Blue Knights", s: "Shiver", sc: "86.450", d: "寒気。" },
            { y: 2009, r: 12, c: "Troopers", s: "Western Side Story", sc: "85.100", d: "西部。" },
            // 2008
            { y: 2008, r: 1, c: "Phantom Regiment", s: "Spartacus", sc: "98.125", d: "スパルタクス。" },
            { y: 2008, r: 2, c: "Blue Devils", s: "Constantly Risking Absurdity", sc: "98.100", d: "不条理。" },
            { y: 2008, r: 3, c: "The Cavaliers", s: "Samurai", sc: "97.325", d: "侍。" },
            { y: 2008, r: 4, c: "Carolina Crown", s: "Finis", sc: "96.800", d: "終わり。" },
            { y: 2008, r: 5, c: "The Cadets", s: "Pursuit of Happiness", sc: "96.600", d: "幸福の追求。" },
            { y: 2008, r: 6, c: "Bluecoats", s: "The Knockout", sc: "93.175", d: "ボクシング。" },
            { y: 2008, r: 7, c: "Santa Clara Vanguard", s: "3hree", sc: "93.025", d: "3。" },
            { y: 2008, r: 8, c: "Blue Stars", s: "Le Tour", sc: "90.425", d: "自転車レース。" },
            { y: 2008, r: 9, c: "Blue Knights", s: "Knight Reign", sc: "89.300", d: "騎士。" },
            { y: 2008, r: 10, c: "Boston Crusaders", s: "Neocosmos", sc: "87.275", d: "新宇宙。" },
            { y: 2008, r: 11, c: "Glassmen", s: "Karneval", sc: "86.500", d: "カーニバル。" },
            { y: 2008, r: 12, c: "Madison Scouts", s: "La Noche de la Iguana", sc: "85.225", d: "イグアナの夜。" },
            // 2007
            { y: 2007, r: 1, c: "Blue Devils", s: "Winged Victory", sc: "98.000", d: "ニケ。" },
            { y: 2007, r: 2, c: "The Cadets", s: "This I Believe", sc: "97.025", d: "信念。" },
            { y: 2007, r: 3, c: "The Cavaliers", s: "And So It Goes", sc: "96.350", d: "ビリー・ジョエル。" },
            { y: 2007, r: 4, c: "Phantom Regiment", s: "On Air", sc: "94.850", d: "飛行。" },
            { y: 2007, r: 5, c: "Santa Clara Vanguard", s: "Eureka!", sc: "94.175", d: "発見。" },
            { y: 2007, r: 6, c: "Carolina Crown", s: "Triple Crown", sc: "94.150", d: "競馬。" },
            { y: 2007, r: 7, c: "Bluecoats", s: "Criminal", sc: "94.050", d: "犯罪。" },
            { y: 2007, r: 8, c: "Blue Knights", s: "Dark Dances", sc: "90.275", d: "ショスタコーヴィチ。" },
            { y: 2007, r: 9, c: "Boston Crusaders", s: "A Picasso Suite", sc: "90.200", d: "ピカソ。" },
            { y: 2007, r: 10, c: "Colts", s: "Equinox", sc: "86.150", d: "春分。" },
            { y: 2007, r: 11, c: "Glassmen", s: "Gypsy", sc: "85.750", d: "ジプシー。" },
            { y: 2007, r: 12, c: "Spirit from JSU", s: "Genesis", sc: "84.500", d: "創世記。" },
            // 2006
            { y: 2006, r: 1, c: "The Cavaliers", s: "Machine", sc: "97.200", d: "機械。" },
            { y: 2006, r: 2, c: "Phantom Regiment", s: "Faust", sc: "96.850", d: "ファウスト。" },
            { y: 2006, r: 3, c: "Blue Devils", s: "The Godfather, Part Blue", sc: "96.550", d: "ゴッドファーザー。" },
            { y: 2006, r: 4, c: "Bluecoats", s: "Connexus", sc: "93.175", d: "繋がり。" },
            { y: 2006, r: 5, c: "The Cadets", s: "Volume 2: Through the Looking Glass", sc: "93.025", d: "鏡の国のアリス。" },
            { y: 2006, r: 6, c: "Santa Clara Vanguard", s: "Moto Perpetuo", sc: "92.350", d: "無窮動。" },
            { y: 2006, r: 7, c: "Blue Knights", s: "Dark Knights", sc: "90.275", d: "バーバー。" },
            { y: 2006, r: 8, c: "Carolina Crown", s: "In.Trance", sc: "89.975", d: "トランス。" },
            { y: 2006, r: 9, c: "Madison Scouts", s: "Primal Forces", sc: "88.350", d: "原始。" },
            { y: 2006, r: 10, c: "Boston Crusaders", s: "Cathedrals of the Mind", sc: "87.200", d: "大聖堂。" },
            { y: 2006, r: 11, c: "Glassmen", s: "Beethoven", sc: "85.325", d: "ベートーヴェン。" },
            { y: 2006, r: 12, c: "Spirit from JSU", s: "Old Man River", sc: "84.825", d: "川。" },
            // 2005
            { y: 2005, r: 1, c: "The Cadets", s: "The Zone", sc: "99.150", d: "夢の世界。" },
            { y: 2005, r: 2, c: "The Cavaliers", s: "My Kind of Town", sc: "97.625", d: "シカゴ。" },
            { y: 2005, r: 3, c: "Phantom Regiment", s: "Rhapsody", sc: "96.825", d: "アメリカン・パリ。" },
            { y: 2005, r: 4, c: "Blue Devils", s: "Dance Derby of the Century", sc: "96.300", d: "ダンスマラソン。" },
            { y: 2005, r: 5, c: "Bluecoats", s: "Caravan", sc: "94.325", d: "キャラバン。" },
            { y: 2005, r: 6, c: "Madison Scouts", s: "The Carmen Project", sc: "92.625", d: "カルメン。" },
            { y: 2005, r: 7, c: "Carolina Crown", s: "Angelus", sc: "90.725", d: "天使。" },
            { y: 2005, r: 8, c: "Santa Clara Vanguard", s: "Russia: Revolution", sc: "88.650", d: "ロシア革命。" },
            { y: 2005, r: 9, c: "Boston Crusaders", s: "Ode to Joy", sc: "88.600", d: "歓喜の歌。" },
            { y: 2005, r: 10, c: "Blue Knights", s: "A Midsummer Knight's Dream", sc: "88.200", d: "真夏の夜の夢。" },
            { y: 2005, r: 11, c: "Glassmen", s: "New World", sc: "87.550", d: "新世界。" },
            { y: 2005, r: 12, c: "Spirit from JSU", s: "The Spirit of Broadway", sc: "86.075", d: "ブロードウェイ。" },
            // 2004
            { y: 2004, r: 1, c: "The Cavaliers", s: "007", sc: "98.700", d: "ジェームズ・ボンド。" },
            { y: 2004, r: 2, c: "Blue Devils", s: "The SummerTrain Blues Mix", sc: "98.525", d: "列車。" },
            { y: 2004, r: 3, c: "Santa Clara Vanguard", s: "Attraction: The Music of Scheherazade", sc: "96.825", d: "シェヘラザード。" },
            { y: 2004, r: 4, c: "The Cadets", s: "Living With the Past", sc: "95.600", d: "ジェスロ・タル。" },
            { y: 2004, r: 5, c: "Phantom Regiment", s: "Apasionada 874", sc: "95.575", d: "ピアソラ。" },
            { y: 2004, r: 6, c: "Bluecoats", s: "Mood Swings", sc: "92.125", d: "ムード。" },
            { y: 2004, r: 7, c: "Carolina Crown", s: "Bohemia!", sc: "91.225", d: "ボヘミア。" },
            { y: 2004, r: 8, c: "Madison Scouts", s: "Madrague", sc: "89.625", d: "マドラグ。" },
            { y: 2004, r: 9, c: "Boston Crusaders", s: "The Composition of Color", sc: "89.150", d: "色。" },
            { y: 2004, r: 10, c: "Blue Knights", s: "A Knight's Tale", sc: "87.225", d: "騎士。" },
            { y: 2004, r: 11, c: "Crossmen", s: "Unity", sc: "85.925", d: "団結。" },
            { y: 2004, r: 12, c: "Glassmen", s: "Voice of One", sc: "85.125", d: "声。" },
            // 2003
            { y: 2003, r: 1, c: "Blue Devils", s: "Phenomenon of Cool", sc: "98.800", d: "クール。" },
            { y: 2003, r: 2, c: "The Cavaliers", s: "Spin Cycle", sc: "97.250", d: "回転。" },
            { y: 2003, r: 3, c: "The Cadets", s: "Our Favorite Things", sc: "97.100", d: "お気に入り。" },
            { y: 2003, r: 4, c: "Phantom Regiment", s: "Harmonic Journey", sc: "96.800", d: "調和。" },
            { y: 2003, r: 5, c: "Santa Clara Vanguard", s: "Pathways", sc: "94.700", d: "道。" },
            { y: 2003, r: 6, c: "Boston Crusaders", s: "Bravo", sc: "91.450", d: "ブラボー。" },
            { y: 2003, r: 7, c: "Bluecoats", s: "Capture the Flag", sc: "90.750", d: "旗。" },
            { y: 2003, r: 8, c: "Madison Scouts", s: "Gold, Green & Red", sc: "89.600", d: "色。" },
            { y: 2003, r: 9, c: "Crossmen", s: "Colors", sc: "87.850", d: "色彩。" },
            { y: 2003, r: 10, c: "Carolina Crown", s: "Bell-issimo", sc: "86.650", d: "鐘。" },
            { y: 2003, r: 11, c: "Magic of Orlando", s: "Silver & Black", sc: "86.150", d: "銀と黒。" },
            { y: 2003, r: 12, c: "Spirit from JSU", s: "Time", sc: "84.500", d: "時間。" },
            // 2002
            { y: 2002, r: 1, c: "The Cavaliers", s: "Frameworks", sc: "99.150", d: "枠組み。" },
            { y: 2002, r: 2, c: "Blue Devils", s: "Jazz: Music Made in America", sc: "97.300", d: "ジャズ。" },
            { y: 2002, r: 3, c: "The Cadets", s: "An American Revival", sc: "96.750", d: "復興。" },
            { y: 2002, r: 4, c: "Santa Clara Vanguard", s: "Sound, Shape, and Color", sc: "95.650", d: "音、形、色。" },
            { y: 2002, r: 5, c: "Phantom Regiment", s: "Heroic Sketches", sc: "92.400", d: "英雄。" },
            { y: 2002, r: 6, c: "Boston Crusaders", s: "You Are My Star", sc: "91.450", d: "星。" },
            { y: 2002, r: 7, c: "Bluecoats", s: "Urban Dances", sc: "89.400", d: "都市。" },
            { y: 2002, r: 8, c: "Glassmen", s: "Odyssey", sc: "88.300", d: "オデッセイ。" },
            { y: 2002, r: 9, c: "Crossmen", s: "The Signature Series", sc: "87.550", d: "署名。" },
            { y: 2002, r: 10, c: "Spirit from JSU", s: "Darkness Into Light", sc: "85.350", d: "光へ。" },
            { y: 2002, r: 11, c: "Magic of Orlando", s: "Wind", sc: "84.850", d: "風。" },
            { y: 2002, r: 12, c: "Seattle Cascades", s: "City Riffs", sc: "84.050", d: "街。" },
            // 2001
            { y: 2001, r: 1, c: "The Cavaliers", s: "Four Corners", sc: "98.350", d: "四隅。" },
            { y: 2001, r: 2, c: "Blue Devils", s: "Awayday Blue", sc: "97.600", d: "休日。" },
            { y: 2001, r: 2, c: "The Cadets", s: "Juxtaperformance", sc: "97.600", d: "並列。" },
            { y: 2001, r: 4, c: "Santa Clara Vanguard", s: "New Era Metropolis", sc: "95.350", d: "メトロポリス。" },
            { y: 2001, r: 5, c: "Glassmen", s: "Imagining the World", sc: "91.300", d: "世界。" },
            { y: 2001, r: 6, c: "Phantom Regiment", s: "Virtuoso", sc: "91.150", d: "名手。" },
            { y: 2001, r: 7, c: "Crossmen", s: "Late Night Jazz", sc: "89.550", d: "深夜ジャズ。" },
            { y: 2001, r: 8, c: "Bluecoats", s: "High Velocity", sc: "88.600", d: "高速。" },
            { y: 2001, r: 9, c: "Boston Crusaders", s: "Bach to the Future", sc: "87.150", d: "バッハ。" },
            { y: 2001, r: 10, c: "Carolina Crown", s: "Industry", sc: "85.950", d: "産業。" },
            { y: 2001, r: 11, c: "Madison Scouts", s: "Hot Jazz", sc: "85.350", d: "ホットジャズ。" },
            { y: 2001, r: 12, c: "Colts", s: "Chivalry", sc: "84.400", d: "騎士道。" },
            // 2000
            { y: 2000, r: 1, c: "The Cadets", s: "We Are the Future", sc: "97.650", d: "未来。" },
            { y: 2000, r: 1, c: "The Cavaliers", s: "Niagara Falls", sc: "97.650", d: "ナイアガラ。" },
            { y: 2000, r: 3, c: "Blue Devils", s: "Methods of Madness", sc: "96.900", d: "狂気。" },
            { y: 2000, r: 4, c: "Santa Clara Vanguard", s: "Age of Reverence", sc: "94.700", d: "バルトーク。" },
            { y: 2000, r: 5, c: "Boston Crusaders", s: "Red", sc: "92.350", d: "赤。" },
            { y: 2000, r: 6, c: "Blue Knights", s: "Colors of Brass", sc: "92.000", d: "金管の色。" },
            { y: 2000, r: 7, c: "Phantom Regiment", s: "Masters of Mystique", sc: "90.650", d: "神秘。" },
            { y: 2000, r: 8, c: "Glassmen", s: "Gershwin", sc: "90.350", d: "ガーシュウィン。" },
            { y: 2000, r: 9, c: "Crossmen", s: "Birdwatchers", sc: "88.700", d: "バードウォッチング。" },
            { y: 2000, r: 10, c: "Madison Scouts", s: "The Cossack Brotherhood", sc: "85.500", d: "コサック。" },
            { y: 2000, r: 11, c: "Carolina Crown", s: "The Mask of Zorro", sc: "85.150", d: "ゾロ。" },
            { y: 2000, r: 12, c: "Bluecoats", s: "Threshold", sc: "84.400", d: "閾値。" }
        ];

        /* --- COLOR ENGINE --- */
        const getColor = (c) => {
            if(c.includes("Devils")) return "var(--bd)";
            if(c.includes("Bluecoats")) return "var(--bluecoats)";
            if(c.includes("Crown")) return "var(--crown)";
            if(c.includes("Boston")) return "var(--boston)";
            if(c.includes("Vanguard")) return "var(--scv)";
            if(c.includes("Cavaliers")) return "var(--cavies)";
            if(c.includes("Phantom")) return "var(--phantom)";
            if(c.includes("Cadets")) return "var(--cadets)";
            if(c.includes("Mandarins")) return "var(--mandarins)";
            if(c.includes("Stars")) return "var(--stars)";
            if(c.includes("Troopers")) return "var(--troopers)";
            if(c.includes("Colts")) return "var(--colts)";
            if(c.includes("Madison")) return "var(--madison)";
            if(c.includes("Crossmen")) return "var(--crossmen)";
            if(c.includes("Knights")) return "var(--bk)";
            if(c.includes("Spirit")) return "var(--spirit)";
            if(c.includes("Glassmen")) return "var(--glassmen)";
            if(c.includes("Cascades")) return "var(--seattle)";
            if(c.includes("Academy")) return "var(--academy)";
            if(c.includes("Magic")) return "var(--magic)";
            return "#333";
        };

        /* --- VIEW CONTROLLER --- */
        const viewTree = document.getElementById('view-tree');
        const viewDb = document.getElementById('view-db');
        const btnTree = document.getElementById('btn-tree');
        const btnDb = document.getElementById('btn-db');

        function switchView(mode) {
            window.scrollTo({top:0, behavior:'smooth'});
            if(mode === 'tree') {
                viewTree.style.display = 'block';
                viewDb.style.display = 'none';
                btnTree.classList.add('active');
                btnDb.classList.remove('active');
                // Re-trigger animations
                document.querySelectorAll('.year-node').forEach(el => {
                    el.classList.remove('visible');
                    setTimeout(() => el.classList.add('visible'), 10);
                });
            } else {
                viewTree.style.display = 'none';
                viewDb.style.display = 'block';
                btnTree.classList.remove('active');
                btnDb.classList.add('active');
            }
        }

        /* --- RENDER: CHAMPION TREE (v4.1 Logic) --- */
        function renderTree() {
            const root = document.getElementById('tree-root');
            root.innerHTML = '';
            const champs = db.filter(d => d.r === 1).sort((a,b) => b.y - a.y);
            const years = [...new Set(champs.map(d => d.y))];

            years.forEach((year, i) => {
                const winners = champs.filter(d => d.y === year);
                const node = document.createElement('div');
                node.className = 'year-node';
                node.style.transitionDelay = `${i * 0.05}s`;

                let content = `<div class="year-badge">${year}</div>`;
                
                const makeCard = (d) => {
                    const color = getColor(d.c);
                    const titleColor = d.c.includes("Phantom") ? '#333' : color;
                    return `
                    <div class="p-card" onclick='openModal(${JSON.stringify(d)})' style="--accent-color:${color}">
                        <div class="p-card-accent"></div>
                        <div class="p-card-body">
                            <div class="p-corps" style="color:${titleColor}">${d.c}</div>
                            <div class="p-show">"${d.s}"</div>
                            <div class="p-score">${d.sc}</div>
                        </div>
                    </div>`;
                };

                if(winners.length > 1) {
                    content += `<div class="tie-wrapper">${winners.map(w => makeCard(w)).join('')}</div>`;
                } else {
                    content += makeCard(winners[0]);
                }

                node.innerHTML = content;
                root.appendChild(node);
            });

            setTimeout(() => {
                const observer = new IntersectionObserver(entries => {
                    entries.forEach(entry => {
                        if(entry.isIntersecting) entry.target.classList.add('visible');
                    });
                }, { threshold: 0.1 });
                document.querySelectorAll('.year-node').forEach(el => observer.observe(el));
            }, 100);
        }

        /* --- RENDER: DATABASE GRID --- */
        function renderDb(data) {
            const root = document.getElementById('db-root');
            root.innerHTML = '';
            const years = [...new Set(data.map(d => d.y))].sort((a,b) => b - a);
            
            years.forEach(y => {
                const group = document.createElement('div');
                group.className = 'grid-group'; // No class defined but keeps structure
                group.innerHTML = `<div class="grid-year">${y}</div>`;
                const grid = document.createElement('div');
                grid.className = 'grid';
                
                data.filter(d => d.y === y).sort((a,b) => a.r - b.r).forEach(d => {
                    const card = document.createElement('div');
                    card.className = 'db-card';
                    card.onclick = () => openModal(d);
                    const color = getColor(d.c);
                    const rankClass = d.r === 1 ? 'rank-1-gold' : '';
                    
                    card.innerHTML = `
                        <div class="db-rank ${rankClass}">${d.r}</div>
                        <div style="font-family:var(--font-heading); font-size:1.2rem; color:${color}; margin-bottom:5px;">${d.c}</div>
                        <div style="font-size:0.9rem; font-style:italic; color:#888;">"${d.s}"</div>
                        <div style="margin-top:10px; font-weight:700; color:#fff;">${d.sc}</div>
                    `;
                    grid.appendChild(card);
                });
                group.appendChild(grid);
                root.appendChild(group);
            });
        }

        /* --- MODAL --- */
        const modal = document.getElementById('modal');
        function openModal(d) {
            document.getElementById('m-year').innerText = d.y;
            document.getElementById('m-rank').innerText = d.r === 1 ? 'WORLD CHAMPION' : `RANK ${d.r}`;
            document.getElementById('m-corps').innerText = d.c;
            document.getElementById('m-show').innerText = `"${d.s}"`;
            document.getElementById('m-score').innerText = d.sc;
            document.getElementById('m-desc').innerText = d.d || "";
            
            const color = getColor(d.c);
            document.getElementById('m-header').style.setProperty('--modal-tint', color);
            
            const q = `DCI ${d.y} ${d.c} ${d.s} full show`;
            document.getElementById('m-link').href = `https://www.youtube.com/results?search_query=${encodeURIComponent(q)}`;
            
            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('active'), 10);
        }

        function closeModal() {
            modal.classList.remove('active');
            setTimeout(() => modal.style.display = 'none', 300);
        }

        /* --- SEARCH --- */
        document.getElementById('dbSearch').addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            const filtered = db.filter(d => 
                d.c.toLowerCase().includes(term) || 
                d.s.toLowerCase().includes(term) || 
                d.y.toString().includes(term)
            );
            renderDb(filtered);
        });

        // Init
        renderTree();
        renderDb(db);

    </script>
</body>
</html>
